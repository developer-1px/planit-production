import{a5 as p,g as f,s as y,l as P}from"./DhavXi9s.js";import{a as A}from"./DECdVU7Y.js";const m=(e,t,r)=>new Proxy(Function,{get(s,a){return a==="toString"?()=>r:m(e,t,r+a)},async apply(s,a,l){const u=/:[^/?]+|\([^)]+\)|\{[^)]+}|\[[^]+]|<[^>]+>/g,n=r.replace(u,w=>{const h=l.shift();if(h===void 0)throw new Error(`Missing value for path parameter '${w}'`);if(typeof h!="number"&&typeof h!="string")throw new Error(`Parameter type must be string or number '${w}'`);return encodeURIComponent(h)}),o=e.baseURL.endsWith("/"),c=n.startsWith("/");let i=e.baseURL;!o&&!c?i+="/":o&&c&&(i=i.slice(0,-1)),i+=n;let g=null,d=null;t!=="GET"&&t!=="HEAD"&&(g=l.shift());const b=Object.assign(Object.create(null),...l);return d=new URLSearchParams(b).toString(),d&&(i+=(i.includes("?")?"&":"?")+d),e.adapter(e,t,i,g)}}),I={baseURL:"/",headers:{"Content-Type":"application/json"},timeout:0,config:{}},T=e=>new Proxy(Object.create(null),{get:(t,r)=>r==="config"?e:m({...I,...e},r.toUpperCase(),"")}),E=e=>e;class S extends Error{constructor(t,r,s){super(`HTTP Error ${t}: ${r} ${JSON.stringify(s)}`),this.status=t,this.statusText=r,this.body=s}}const v=()=>E(async(e,t,r,s)=>{let a=null;if(s)if(e.headers["Content-Type"]==="multipart/form-data"){a=new FormData;for(const n in s)a.append(n,s[n])}else a=JSON.stringify(s);const l=new AbortController,u=e.timeout>0?setTimeout(()=>l.abort(),e.timeout):null;try{const n={method:t,headers:{...e.headers},signal:l.signal,body:a},o=await(e.fetch||fetch)(r,n);clearTimeout(u),console.log("response",o),console.log("response.headers",o.headers);let c;if(c=await o.json(),!o.ok)throw new S(o.status,o.statusText,c);return console.log(`API Call: ${t} ${r} - Status: ${o.status}`),{...o,data:c,config:e,request:{url:r,...n}}}catch(n){throw clearTimeout(u),n.name==="AbortError"?new Error("Request timed out"):n}}),O=T({adapter:v(),fetch});class x{#t=p("");get nav(){return f(this.#t)}set nav(t){y(this.#t,t,!0)}#e=p(P({works:[],"plan v":[],directors:[]}));get tags(){return f(this.#e)}set tags(t){y(this.#e,t,!0)}#r=p("");get currentVideoId(){return f(this.#r)}set currentVideoId(t){y(this.#r,t,!0)}init(){A(()=>{this.메뉴선택("")})}setTags(t){this.tags=Object.fromEntries(Object.entries(t).map(([r,s])=>[r,Array.isArray(s)?s:s.split(/\s*\n\s*/).filter(Boolean)]))}메뉴선택(t){this.nav=this.nav===t?"":t}비디오보기(t){this.currentVideoId=t}비디오닫기(){this.currentVideoId=null}}const C=new x;typeof window<"u"&&(window.state=C);export{O as h,C as s};
