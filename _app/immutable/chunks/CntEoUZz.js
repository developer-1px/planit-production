import"./NZTpNUN0.js";import{o as b,a as T}from"./Bdc5JO82.js";import{_ as k,g as e,s as c,j as d,f as C,a1 as M,a3 as S,a2 as E,a4 as F,a as V,a0 as L}from"./BukKJz2t.js";import{d as x,e as v}from"./CF-MGArY.js";import{s as A}from"./BiVVaKNZ.js";import{b as p}from"./Bifmr8Il.js";import{b as B}from"./BEnazXDl.js";import{P}from"./KyN7jw-T.js";import{T as j}from"./D4UgOZ7U.js";var q=C('<div class="video-background-thumbnail svelte-ynovpd"><!> <div class="vimeo-container svelte-ynovpd"></div></div>');function O(u,a){k(a,!0);let r=c(null),t=c(null),o=c("loading"),i=c(""),s=new j(l=>{s=l});const m=typeof window<"u"&&"ontouchstart"in document;b(()=>{!e(r)||!a.video.video_id||(d(t,new P(e(r),{id:a.video.video_id,background:!0,autoplay:!1,loop:!0}),!0),e(t).pause(),a.video.video_start_at&&e(t).setCurrentTime(parseFloat(a.video.video_start_at)),e(t).on("play",()=>{d(o,"played"),d(i,"played"),s.start()}),e(t).on("pause",()=>{d(o,"paused"),d(i,"paused")}),e(t).on("loaded",()=>{d(o,"paused")}),a.video.video_end_at&&e(t).on("timeupdate",l=>{l.seconds>=parseFloat(a.video.video_end_at)&&e(t).setCurrentTime(parseFloat(a.video.video_start_at||"0"))}),e(t).on("ended",()=>{e(t).setCurrentTime(parseFloat(a.video.video_start_at||"0"))}))});function _(){!m&&e(t)&&e(t).play()}function y(){!m&&e(t)&&(s.stop(),e(t).pause())}function g(){e(t)&&e(t).play()}function h(){e(t)&&e(t).pause()}T(()=>{e(t)&&e(t).destroy()});var n=q();n.__click=function(...l){a.onClick?.apply(this,l)};var f=M(n);A(f,a,"default",{get t(){return s},get state(){return e(o)},get willState(){return e(i)}});var w=S(f,2);return B(w,l=>d(r,l),()=>e(r)),E(n),F(()=>{p(n,"attr-state",e(o)),p(n,"attr-will-state",e(i))}),v("mouseenter",n,_),v("mouseleave",n,y),V(u,n),L({play:g,pause:h})}x(["click"]);function Q(){if(!("ontouchstart"in document))return;let u;const a=()=>{const t=document.querySelectorAll("video-background-thumbnail");let o=!1;t.forEach(i=>{if(!o){const s=i.getBoundingClientRect();if(s.top>=0&&s.top<window.innerHeight){o=!0,i.play&&i.play();return}}i.pause&&i.pause()})},r=()=>{clearTimeout(u),u=window.setTimeout(()=>{a()},500)};return window.addEventListener("scroll",r),setTimeout(a,1e3),()=>{window.removeEventListener("scroll",r)}}export{O as V,Q as i};
