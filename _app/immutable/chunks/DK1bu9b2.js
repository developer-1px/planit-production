import{a5 as p,g as f,s as g,l as P}from"./DhavXi9s.js";import{a as I}from"./Dk5lETzj.js";const m=(e,t,r)=>new Proxy(Function,{get(s,a){return a==="toString"?()=>r:m(e,t,r+a)},async apply(s,a,l){const c=/:[^/?]+|\([^)]+\)|\{[^)]+}|\[[^]+]|<[^>]+>/g,n=r.replace(c,y=>{const h=l.shift();if(h===void 0)throw new Error(`Missing value for path parameter '${y}'`);if(typeof h!="number"&&typeof h!="string")throw new Error(`Parameter type must be string or number '${y}'`);return encodeURIComponent(h)}),o=e.baseURL.endsWith("/"),u=n.startsWith("/");let i=e.baseURL;!o&&!u?i+="/":o&&u&&(i=i.slice(0,-1)),i+=n;let w=null,d=null;t!=="GET"&&t!=="HEAD"&&(w=l.shift());const b=Object.assign(Object.create(null),...l);return d=new URLSearchParams(b).toString(),d&&(i+=(i.includes("?")?"&":"?")+d),e.adapter(e,t,i,w)}}),T={baseURL:"/",headers:{"Content-Type":"application/json"},timeout:0,config:{}},v=e=>new Proxy(Object.create(null),{get:(t,r)=>r==="config"?e:m({...T,...e},r.toUpperCase(),"")}),E=e=>e;class S extends Error{constructor(t,r,s){super(`HTTP Error ${t}: ${r} ${JSON.stringify(s)}`),this.status=t,this.statusText=r,this.body=s}}const A=()=>E(async(e,t,r,s)=>{let a=null;if(s)if(e.headers["Content-Type"]==="multipart/form-data"){a=new FormData;for(const n in s)a.append(n,s[n])}else a=JSON.stringify(s);const l=new AbortController,c=e.timeout>0?setTimeout(()=>l.abort(),e.timeout):null;try{const n={method:t,headers:{...e.headers},signal:l.signal,body:a},o=await(e.fetch||fetch)(r,n);clearTimeout(c),console.log("response",o),console.log("response.headers",o.headers);let u;if(u=await o.json(),!o.ok)throw new S(o.status,o.statusText,u);return console.log(`API Call: ${t} ${r} - Status: ${o.status}`),{...o,data:u,config:e,request:{url:r,...n}}}catch(n){throw clearTimeout(c),n.name==="AbortError"?new Error("Request timed out"):n}}),O=v({adapter:A(),fetch});class x{#t=p("");get nav(){return f(this.#t)}set nav(t){g(this.#t,t,!0)}#e=p(P({works:[],"plan v":[],directors:[]}));get tags(){return f(this.#e)}set tags(t){g(this.#e,t,!0)}#r=p("");get currentVideoId(){return f(this.#r)}set currentVideoId(t){g(this.#r,t,!0)}init(){I(()=>{this.메뉴선택("")})}setTags(t){this.tags=Object.fromEntries(Object.entries(t).map(([r,s])=>[r,s.split(/\s*\n\s*/)]))}메뉴선택(t){this.nav=this.nav===t?"":t}비디오보기(t){this.currentVideoId=t}비디오닫기(){this.currentVideoId=null}}const C=new x;typeof window<"u"&&(window.state=C);export{O as h,C as s};
