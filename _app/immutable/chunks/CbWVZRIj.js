import"./NZTpNUN0.js";import{o as w,a as T}from"./erN7JwqA.js";import{X as k,g as e,a5 as c,s as d,f as C,_ as M,a0 as S,$ as E,a1 as F,a as V,Z as L}from"./DhavXi9s.js";import{d as j,e as v}from"./DDewMqrm.js";import{s as x}from"./AZ3qudhq.js";import{b as p}from"./DMofKf_K.js";import{b as z}from"./CTWb8ZlO.js";import{P as A}from"./KyN7jw-T.js";import{T as B}from"./Dmgb2f4f.js";var P=C('<div class="video-background-thumbnail svelte-1dbzdlj"><!> <div class="vimeo-container svelte-1dbzdlj"></div></div>');function K(u,a){k(a,!0);let r=c(null),t=c(null),o=c("loading"),i=c(""),s=new B(l=>{s=l});const m=typeof window<"u"&&"ontouchstart"in document;w(()=>{!e(r)||!a.video.video_id||(d(t,new A(e(r),{id:a.video.video_id,background:!0,autoplay:!1,loop:!0}),!0),e(t).pause(),a.video.video_start_at&&e(t).setCurrentTime(parseFloat(a.video.video_start_at)),e(t).on("play",()=>{d(o,"played"),d(i,"played"),s.start()}),e(t).on("pause",()=>{d(o,"paused"),d(i,"paused")}),e(t).on("loaded",()=>{d(o,"paused")}),a.video.video_end_at&&e(t).on("timeupdate",l=>{l.seconds>=parseFloat(a.video.video_end_at)&&e(t).setCurrentTime(parseFloat(a.video.video_start_at||"0"))}),e(t).on("ended",()=>{e(t).setCurrentTime(parseFloat(a.video.video_start_at||"0"))}))});function _(){!m&&e(t)&&e(t).play()}function b(){!m&&e(t)&&(s.stop(),e(t).pause())}function y(){e(t)&&e(t).play()}function g(){e(t)&&e(t).pause()}T(()=>{e(t)&&e(t).destroy()});var n=P();n.__click=function(...l){a.onClick?.apply(this,l)};var f=M(n);x(f,a,"default",{get t(){return s},get state(){return e(o)},get willState(){return e(i)}});var h=S(f,2);return z(h,l=>d(r,l),()=>e(r)),E(n),F(()=>{p(n,"attr-state",e(o)),p(n,"attr-will-state",e(i))}),v("mouseenter",n,_),v("mouseleave",n,b),V(u,n),L({play:y,pause:g})}j(["click"]);function N(){if(!("ontouchstart"in document))return;let u;const a=()=>{const t=document.querySelectorAll("video-background-thumbnail");let o=!1;t.forEach(i=>{if(!o){const s=i.getBoundingClientRect();if(s.top>=0&&s.top<window.innerHeight){o=!0,i.play&&i.play();return}}i.pause&&i.pause()})},r=()=>{clearTimeout(u),u=window.setTimeout(()=>{a()},500)};return window.addEventListener("scroll",r),setTimeout(a,1e3),()=>{window.removeEventListener("scroll",r)}}export{K as V,N as i};
