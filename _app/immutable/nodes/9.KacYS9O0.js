import"../chunks/NZTpNUN0.js";import{X as ae,b as B,g as e,a5 as r,s as d,f as D,_,a3 as pe,$ as n,a1 as se,a as F,Z as ie,a2 as me,a6 as C,a0 as k,a7 as fe}from"../chunks/DhavXi9s.js";import{d as ye,e as ge,s as Q}from"../chunks/DDewMqrm.js";import{i as U}from"../chunks/C8zPlSMq.js";import{e as ee,i as te}from"../chunks/DMofKf_K.js";import{s as H}from"../chunks/B0hh_pT5.js";import{s as S}from"../chunks/DKGTjmyz.js";import{T as he,V as be}from"../chunks/Dmgb2f4f.js";import{b as Pe}from"../chunks/CTWb8ZlO.js";import{r as ke}from"../chunks/C6CJrySy.js";import{P as Ve}from"../chunks/KyN7jw-T.js";var Te=D('<div><video-background></video-background> <div class="layer bg(#000.0) pack"></div></div>',2);function xe(V,l){ae(l,!0);const p=ke(l,["$$slots","$$events","$$legacy"]),{video:s,isPlaying:N,visible:m,onPlay:u,onEnded:i,onTimeupdate:o}=p;let f=r(null),a=r(null),T=r(!1);B(()=>{!e(f)||e(a)||(d(a,new Ve(e(f),{id:s.video_id,background:!0,autoplay:!1,autopause:!0,loop:!0}),!0),e(a).on("play",()=>{u&&u()}),e(a).on("loaded",async()=>{d(T,!0),s.video_start_at&&await e(a).setCurrentTime(parseFloat(s.video_start_at))}),e(a).on("timeupdate",c=>{o&&o({detail:{percent:c.percent,seconds:c.seconds}}),s.video_end_at&&c.seconds>=parseFloat(s.video_end_at)&&(e(a).setCurrentTime(parseFloat(s.video_start_at||"0")),i&&i())}),e(a).on("ended",async()=>{await e(a).setCurrentTime(parseFloat(s.video_start_at||"0")),i&&i()}))}),B(()=>{!e(a)||!e(T)||(l.state==="play"?e(a).play():l.state==="pause"&&e(a).pause().then(()=>{s.video_start_at&&e(a).setCurrentTime(parseFloat(s.video_start_at))}))});var y=Te();let x;var g=_(y);Pe(g,c=>d(f,c),()=>e(f)),pe(2),n(y),se(c=>x=H(y,1,"layer",null,x,c),[()=>({hidden:!m})]),F(V,y),ie()}var Ee=(V,l,p)=>l(e(p)),we=D('<div indicator=""></div>'),Ie=D('<section banner-wrap=""><section banner-desc=""><div wrap="" animation-desc=""><h1> </h1> <h2> </h2></div></section> <section banner-indicators=""><div wrap=""></div></section> <section class="track"><div class="progress"></div></section></section>'),Ae=D('<section class="video-background-list" full-screen-banner=""><!> <!></section> <!>',1);function Le(V,l){ae(l,!0);let p=r(!1),s=r(0),N=r(0);const m=new he(t=>{d(p,t.doAnimation,!0),d(s,t.delay1,!0),d(N,t.delay2,!0)});let u=r(0);const i=l.data.mainVideos,o=C(()=>i[e(u)%i.length]);B(()=>{e(u)&&m.stop()});const f=t=>{d(u,t,!0)},a=()=>{fe(u),m.stop()},T=()=>{m.start()},y=()=>{a(),m.stop()};let x=r(!0),g=r(!1);const c=t=>{d(g,!0)};let L=r(0);const oe=t=>{d(L,t.detail.percent*100)},ne=t=>v=>{t.stopPropagation(),v()};var R=Ae(),E=me(R);E.__click=[Ee,c,o];var W=_(E);ee(W,17,()=>i,te,(t,v)=>{const h=C(()=>e(v)===e(o)?"play":"pause"),w=C(()=>e(v)===e(o));xe(t,{get video(){return e(v)},get state(){return e(h)},get visible(){return e(w)},get isPlaying(){return e(x)},onPlay:T,onEnded:y,onTimeupdate:oe})});var re=k(W,2);{var de=t=>{var v=Ie(),h=_(v),w=_(h),b=_(w);let Y,Z;var ve=_(b,!0);n(b);var I=k(b,2);let j,q;var _e=_(I,!0);n(I),n(w),n(h);var O=k(h,2),z=_(O);ee(z,21,()=>i,te,(X,K,A)=>{var P=we(),$=C(()=>ne(()=>f(A)));P.__click=function(...M){e($)?.apply(this,M)},ge("",P,function(...M){(A===e(u)?!0:null)?.apply(this,M)}),F(X,P)}),n(z),n(O);var G=k(O,2),ue=_(G);let J;n(G),n(v),se((X,K,A,P,$)=>{Y=H(b,1,"",null,Y,X),Z=S(b,"",Z,K),Q(ve,e(o).name),j=H(I,1,"",null,j,A),q=S(I,"",q,P),Q(_e,e(o).desc),J=S(ue,"",J,$)},[()=>({animation:e(p)}),()=>({"animation-delay":`${e(s)??""}ms`}),()=>({animation:e(p)}),()=>({"animation-delay":`${e(N)??""}ms`}),()=>({width:`${e(L)??""}%`})]),F(t,v)};U(re,t=>{i.length>0&&t(de)})}n(E);var le=k(E,2);{var ce=t=>{be(t,{get video(){return e(o)},onClose:()=>d(g,!1)})};U(le,t=>{e(g)&&e(o)&&t(ce)})}F(V,R),ie()}ye(["click"]);export{Le as component};
